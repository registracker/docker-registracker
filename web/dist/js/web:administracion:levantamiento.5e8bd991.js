(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["web:administracion:levantamiento"],{"0cb2":function(e,t,a){var i=a("e330"),r=a("7b0b"),n=Math.floor,s=i("".charAt),o=i("".replace),l=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,i,u,f){var m=a+e.length,h=i.length,g=d;return void 0!==u&&(u=r(u),g=c),o(f,g,(function(r,o){var c;switch(s(o,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,a);case"'":return l(t,m);case"<":c=u[l(o,1,-1)];break;default:var d=+o;if(0===d)return r;if(d>h){var f=n(d/10);return 0===f?r:f<=h?void 0===i[f-1]?s(o,1):i[f-1]+s(o,1):r}c=i[d-1]}return void 0===c?"":c}))}},"0fd9":function(e,t,a){"use strict";a("13d5"),a("14d9"),a("4b85");var i=a("2b0e"),r=a("d9f7"),n=a("80d2");const s=["sm","md","lg","xl"],o=["start","end","center"];function l(e,t){return s.reduce((a,i)=>(a[e+Object(n["G"])(i)]=t(),a),{})}const c=e=>[...o,"baseline","stretch"].includes(e),d=l("align",()=>({type:String,default:null,validator:c})),u=e=>[...o,"space-between","space-around"].includes(e),f=l("justify",()=>({type:String,default:null,validator:u})),m=e=>[...o,"space-between","space-around","stretch"].includes(e),h=l("alignContent",()=>({type:String,default:null,validator:m})),g={align:Object.keys(d),justify:Object.keys(f),alignContent:Object.keys(h)},p={align:"align",justify:"justify",alignContent:"align-content"};function v(e,t,a){let i=p[e];if(null!=a){if(t){const a=t.replace(e,"");i+="-"+a}return i+="-"+a,i.toLowerCase()}}const b=new Map;t["a"]=i["default"].extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...d,justify:{type:String,default:null,validator:u},...f,alignContent:{type:String,default:null,validator:m},...h},render(e,{props:t,data:a,children:i}){let n="";for(const r in t)n+=String(t[r]);let s=b.get(n);if(!s){let e;for(e in s=[],g)g[e].forEach(a=>{const i=t[a],r=v(e,a,i);r&&s.push(r)});s.push({"no-gutters":t.noGutters,"row--dense":t.dense,["align-"+t.align]:t.align,["justify-"+t.justify]:t.justify,["align-content-"+t.alignContent]:t.alignContent}),b.set(n,s)}return e(t.tag,Object(r["a"])(a,{staticClass:"row",class:s}),i)}})},"1be4":function(e,t,a){var i=a("d066");e.exports=i("document","documentElement")},"277b":function(e,t,a){"use strict";a.r(t);var i=a("8336"),r=a("b0af"),n=a("99d9"),s=a("62ad"),o=a("a523"),l=a("8fea"),c=a("169a"),d=a("ce7e"),u=a("4bd4"),f=a("132d"),m=a("0fd9"),h=a("2fa4"),g=a("71d9"),p=a("2a7f"),v=function(){var e=this,t=e._self._c;return t("div",[t(l["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"server-items-length":e.total,"sort-by":"id","footer-props":{pageText:"{0}-{1} de {2}","items-per-page-text":"Elementos por página"},"disable-sort":!0},on:{"update:options":e.actualizarOpcionesTabla},scopedSlots:e._u([{key:"no-data",fn:function(){return[e._v(" Sin registros ")]},proxy:!0},{key:"top",fn:function(){return[t(g["a"],{attrs:{flat:""}},[t(p["a"],{staticClass:"text-capitalize"},[e._v(" Gestión marcadores ")]),t(d["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(h["a"]),t(i["a"],{staticClass:"mr-2",attrs:{icon:"",title:"Mostrar registros eliminados"},on:{click:function(t){e.withTrashed=!e.withTrashed}}},[t(f["a"],{attrs:{color:e.withTrashed?"red darken-2":"grey"}},[e._v(" mdi-archive-lock-open-outline ")])],1),t(c["a"],{attrs:{"max-width":"600px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(i["a"],e._g(e._b({staticClass:"mb-2",attrs:{color:"red darken-2",dark:""}},"v-btn",r,!1),a),[t(f["a"],{staticClass:"mr-1"},[e._v(" mdi-plus-box ")]),e._v(" Crear código ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(r["a"],[t(n["d"],[e._v(" "+e._s(e.formTitle)+" ")]),t(n["c"],[t(u["a"],{ref:"form",on:{submit:function(e){e.preventDefault()}}},[t(o["a"],[t(m["a"],[t(s["a"],{staticClass:"my-0 py-0",attrs:{cols:"12",sm:"12"}},[t("vc-date-picker",{ref:"calendar",attrs:{"is-expanded":"",color:"red",locale:"es-SV","min-date":new Date},model:{value:e.editedItem.fecha_vencimiento,callback:function(t){e.$set(e.editedItem,"fecha_vencimiento",t)},expression:"editedItem.fecha_vencimiento"}})],1)],1)],1)],1)],1),t(n["a"],{staticClass:"pt-0 mt-0"},[t(h["a"]),t(i["a"],{attrs:{text:""},on:{click:e.close}},[e._v(" Cancelar ")]),-1==e.editedIndex?t(i["a"],{staticClass:"red darken-1",attrs:{text:"",dark:""},on:{click:e.handleSave}},[e._v(" Crear código ")]):t(i["a"],{staticClass:"red darken-1",attrs:{text:"",dark:""},on:{click:e.handleUpdate}},[e._v(" Actualizar ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[a.fecha_eliminado?e._e():t(f["a"],{staticClass:"mx-1",on:{click:function(t){return e.addUser(a)}}},[e._v(" mdi-account-multiple-plus-outline ")]),a.fecha_eliminado?e._e():t(f["a"],{staticClass:"mx-1",on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),a.fecha_eliminado?t(f["a"],{staticClass:"mx-1",attrs:{color:"grey"},on:{click:function(t){return e.restoreItem(a)}}},[e._v(" mdi-delete-restore ")]):t(f["a"],{staticClass:"mx-1",attrs:{color:"red lighten-2"},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}}])}),t(c["a"],{attrs:{"max-width":"600"},model:{value:e.restoreDialog,callback:function(t){e.restoreDialog=t},expression:"restoreDialog"}},[t(r["a"],[t(n["d"],{staticClass:"text-center"},[e._v(" ¿Quiere restaurar el registro "+e._s(e.editedItem.codigo)+"? ")]),t(n["a"],[t(h["a"]),t(i["a"],{attrs:{color:"red darken-1",text:""},on:{click:e.handleRestore}},[e._v(" Aceptar ")]),t(i["a"],{attrs:{color:"gray darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),t(h["a"])],1)],1)],1),t(c["a"],{attrs:{"max-width":"600"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(r["a"],[t(n["d"],{staticClass:"justify-center"},[e._v(" ¿Quiere eliminar el registro "+e._s(e.editedItem.codigo)+"? ")]),t(n["a"],{staticClass:"py-3"},[t(h["a"]),t(i["a"],{attrs:{text:"",color:"red darken-1"},on:{click:e.handleDelete}},[e._v(" Aceptar ")]),t(i["a"],{attrs:{text:"",color:"gray darken-1"},on:{click:e.close}},[e._v(" Cancelar ")]),t(h["a"])],1)],1)],1)],1)},b=[],y=(a("5b81"),a("33d1"),a("ea98"),a("14d9"),a("132a")),x={name:"GestionLevantamiento",data(){return{url:"",routeName:"",withTrashed:!1,limit:10,page:1,total:0,headers:[{text:"Código",align:"start",value:"codigo",sortable:!1},{text:"Fecha vencimiento",align:"start",value:"fecha_vencimiento",sortable:!1},{text:"Propietario",align:"start",value:"usuario.email",sortable:!1},{text:"Acciones",align:"end",value:"actions",sortable:!1}],items:[],dialog:!1,deleteDialog:!1,restoreDialog:!1,menuDatePicker:!1,editedIndex:-1,editedItem:{id:"",fecha_vencimiento:null},defaultItem:{id:"",fecha_vencimiento:null}}},created(){this.routeName=this.$route.name.split(":").at(-1).replaceAll("-"," "),this.obtenerItems()},watch:{withTrashed(){this.obtenerItems()}},computed:{formTitle(){return-1===this.editedIndex?"Crear registro":"Editar registro"}},methods:{fieldRule:Object(y["g"])("Debe completar el campo."),async obtenerItems(){try{const e=await this.axios.get("levantamientos",{params:{with_trashed:this.withTrashed,limit:this.limit,page:this.page,include:["usuario"].join(","),order_by:"id,desc"}});this.total=e.data.meta.total,this.items=e.data.data}catch(e){console.log(e),this.total=0,this.items=[]}},actualizarOpcionesTabla(e){e.page!==this.page&&(this.page=e.page,this.obtenerItems()),e.itemsPerPage!==this.limit&&(this.limit=e.itemsPerPage,this.obtenerItems())},async setItemValues(e){this.editedIndex=this.items.indexOf(e);const{id:t,fecha_vencimiento:a,codigo:i}=e;let r=a;"string"===typeof a&&(r=a.split("-").reverse().join("/")),this.editedItem={id:t,codigo:i,fecha_vencimiento:r},this.$refs.form&&this.$refs.form.resetValidation()},restoreItem(e){this.setItemValues(e),this.restoreDialog=!0},editItem(e){this.setItemValues(e),this.dialog=!0,this.$nextTick(async()=>{const{calendar:e}=this.$refs;this.editedItem.fecha_vencimiento?await e.move(this.editedItem.fecha_vencimiento):await e.move(new Date)})},addUser({id:e}){this.$router.push({name:"web:administracion:levantamiento-usuario",params:{id:e}})},async handleSave(){try{const e=this.$refs.form.validate();if(!e)return;const t=await this.axios.post("levantamientos",{...this.editedItem,id:void 0});this.$toast.success("Código creado: "+t.data.data.codigo)}catch(e){console.log(e),this.$toast.error("Error al crear el registro.")}this.obtenerItems(),this.close()},async handleUpdate(){try{const e=this.$refs.form.validate();if(!e)return;await this.axios.put("levantamientos/"+this.editedItem.codigo,{...this.editedItem}),this.$toast.success("Registro actualizado correctamente.")}catch(e){console.log(e),this.$toast.error("Error al actualizar el registro.")}this.obtenerItems(),this.close()},async handleRestore(){try{await this.axios.post(`levantamientos/${this.editedItem.codigo}/restore`),this.$toast.info("Registro restaurado.")}catch(e){console.log(e),this.$toast.error("Error al actualizar el medio de desplazamiento.")}this.obtenerItems(),this.close()},async handleDelete(){try{await this.axios.delete("levantamientos/"+this.editedItem.codigo),this.$toast.success("Registro eliminado")}catch(e){console.log(e),this.$toast.error("Error al eliminar el registro.")}this.obtenerItems(),this.close()},deleteItem(e){this.editedItem={...e},this.deleteDialog=!0},close(){this.dialog=!1,this.deleteDialog=!1,this.restoreDialog=!1,this.$nextTick(()=>{this.editedItem={...this.defaultItem},this.editedIndex=-1}),this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.form.reset())}}},w=x,_=a("2877"),k=Object(_["a"])(w,v,b,!1,null,null,null);t["default"]=k.exports},"2a7f":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("71d9"),r=a("80d2");const n=Object(r["j"])("v-toolbar__title"),s=Object(r["j"])("v-toolbar__items");i["a"]},"33d1":function(e,t,a){"use strict";var i=a("23e7"),r=a("7b0b"),n=a("07fa"),s=a("5926"),o=a("44d2");i({target:"Array",proto:!0},{at:function(e){var t=r(this),a=n(t),i=s(e),o=i>=0?i:a+i;return o<0||o>=a?void 0:t[o]}}),o("at")},"37e8":function(e,t,a){var i=a("83ab"),r=a("aed9"),n=a("9bf2"),s=a("825a"),o=a("fc6a"),l=a("df75");t.f=i&&!r?Object.defineProperties:function(e,t){s(e);var a,i=o(t),r=l(t),c=r.length,d=0;while(c>d)n.f(e,a=r[d++],i[a]);return e}},"44d2":function(e,t,a){var i=a("b622"),r=a("7c73"),n=a("9bf2").f,s=i("unscopables"),o=Array.prototype;void 0==o[s]&&n(o,s,{configurable:!0,value:r(null)}),e.exports=function(e){o[s][e]=!0}},"44e7":function(e,t,a){var i=a("861d"),r=a("c6b6"),n=a("b622"),s=n("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},"5b81":function(e,t,a){"use strict";var i=a("23e7"),r=a("c65b"),n=a("e330"),s=a("1d80"),o=a("1626"),l=a("7234"),c=a("44e7"),d=a("577e"),u=a("dc4a"),f=a("90d8"),m=a("0cb2"),h=a("b622"),g=a("c430"),p=h("replace"),v=TypeError,b=n("".indexOf),y=n("".replace),x=n("".slice),w=Math.max,_=function(e,t,a){return a>e.length?-1:""===t?a:b(e,t,a)};i({target:"String",proto:!0},{replaceAll:function(e,t){var a,i,n,h,k,I,C,j,S,$=s(this),O=0,D=0,T="";if(!l(e)){if(a=c(e),a&&(i=d(s(f(e))),!~b(i,"g")))throw v("`.replaceAll` does not allow non-global regexes");if(n=u(e,p),n)return r(n,e,$,t);if(g&&a)return y(d($),e,t)}h=d($),k=d(e),I=o(t),I||(t=d(t)),C=k.length,j=w(1,C),O=_(h,k,0);while(-1!==O)S=I?d(t(k,O,h)):m(k,h,O,[],void 0,t),T+=x(h,D,O)+S,D=O+C,O=_(h,k,O+j);return D<h.length&&(T+=x(h,D)),T}})},"62ad":function(e,t,a){"use strict";a("13d5"),a("14d9"),a("4b85");var i=a("2b0e"),r=a("d9f7"),n=a("80d2");const s=["sm","md","lg","xl"],o=(()=>s.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}))(),l=(()=>s.reduce((e,t)=>(e["offset"+Object(n["G"])(t)]={type:[String,Number],default:null},e),{}))(),c=(()=>s.reduce((e,t)=>(e["order"+Object(n["G"])(t)]={type:[String,Number],default:null},e),{}))(),d={col:Object.keys(o),offset:Object.keys(l),order:Object.keys(c)};function u(e,t,a){let i=e;if(null!=a&&!1!==a){if(t){const a=t.replace(e,"");i+="-"+a}return"col"!==e||""!==a&&!0!==a?(i+="-"+a,i.toLowerCase()):i.toLowerCase()}}const f=new Map;t["a"]=i["default"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...o,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:a,children:i,parent:n}){let s="";for(const r in t)s+=String(t[r]);let o=f.get(s);if(!o){let e;for(e in o=[],d)d[e].forEach(a=>{const i=t[a],r=u(e,a,i);r&&o.push(r)});const a=o.some(e=>e.startsWith("col-"));o.push({col:!a||!t.cols,["col-"+t.cols]:t.cols,["offset-"+t.offset]:t.offset,["order-"+t.order]:t.order,["align-self-"+t.alignSelf]:t.alignSelf}),f.set(s,o)}return e(t.tag,Object(r["a"])(a,{class:o}),i)}})},"7c73":function(e,t,a){var i,r=a("825a"),n=a("37e8"),s=a("7839"),o=a("d012"),l=a("1be4"),c=a("cc12"),d=a("f772"),u=">",f="<",m="prototype",h="script",g=d("IE_PROTO"),p=function(){},v=function(e){return f+h+u+e+f+"/"+h+u},b=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=c("iframe"),a="java"+h+":";return t.style.display="none",l.appendChild(t),t.src=String(a),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},x=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}x="undefined"!=typeof document?document.domain&&i?b(i):y():b(i);var e=s.length;while(e--)delete x[m][s[e]];return x()};o[g]=!0,e.exports=Object.create||function(e,t){var a;return null!==e?(p[m]=r(e),a=new p,p[m]=null,a[g]=e):a=x(),void 0===t?a:n.f(a,t)}},"90d8":function(e,t,a){var i=a("c65b"),r=a("1a2d"),n=a("3a9b"),s=a("ad6d"),o=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in o||r(e,"flags")||!n(o,e)?t:i(s,e)}},ad6d:function(e,t,a){"use strict";var i=a("825a");e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},df75:function(e,t,a){var i=a("ca84"),r=a("7839");e.exports=Object.keys||function(e){return i(e,r)}},ea98:function(e,t,a){"use strict";var i=a("23e7"),r=a("e330"),n=a("1d80"),s=a("5926"),o=a("577e"),l=a("d039"),c=r("".charAt),d=l((function(){return"\ud842"!=="𠮷".at(-2)}));i({target:"String",proto:!0,forced:d},{at:function(e){var t=o(n(this)),a=t.length,i=s(e),r=i>=0?i:a+i;return r<0||r>=a?void 0:c(t,r)}})}}]);
//# sourceMappingURL=web:administracion:levantamiento.5e8bd991.js.map